/*
	--------------------------------
	Lazy ListView for jQuery Mobile
	--------------------------------
	+ https://github.com/itnok/jquery.mobile.lazylistview
	+ version 0.1
	+ Copyright 2012 Simone Conti
	+ Licensed under the MIT license
	
	+ Documentation: http://www.berta8.com/dev/jquery-mobile-lazylistview
	
*/
(function(b){b.extend(!0,b.mobile.listview.prototype.options,{lazy:!1,indolence:0.2,lazyurl:"",lazychunk:20,lazyspinner:'<div data-theme="a" class="ui-lazyspinner"><ul data-role="listview" data-divider-theme="a"><li data-role="list-divider" /></li></ul></div>'});b.extend(!0,b.mobile.listview.prototype,{lazyLoad:function(){var a=b(this.element),c=this,e="",e="undefined"!==typeof a.attr("id")?"#"+a.attr("id"):1==b('ul.ui-listview[data-lazy="true"],ol.ui-listview[data-lazy="true"]').length?'ul.ui-listview[data-lazy="true"],ol.ui-listview[data-lazy="true"]':
"ul:first,ol:first";a.parent().append(c.options.lazyspinner);a.parent().find(".ui-lazyspinner").find("ul,ol").listview();a.data("lazyLoader",b.ajax({url:c.options.lazyurl,type:"GET",data:{start:Math.max(0,a.children("li.ui-li").not(".ui-li-divider").length),chunk:c.options.lazychunk},dataType:"html",success:function(d){a.parent().find(".ui-lazyspinner").remove();d=b("<div>").append(d.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).find(e);a.append(d.children("li"));a.data("lazyLoader",
!1);c.refresh()}}))},isLazy:function(){return"string"===typeof this.options.lazy?"true"==this.options.lazy.toLowerCase():!!this.options.lazy},isLazyLoading:function(){return!!b(this.element).data("lazyLoader")},isAtBottom:function(){var a=b("body").height(),c=b(document).scrollTop();return 1>=b(this.parentPage).height()-c-a*(1+this.options.indolence)}})})(jQuery);
$(function(){$("ul.ui-listview,ol.ui-listview").each(function(b,a){$(a).listview("isLazy")&&$(a).data("lazyLoader",!1)});$(window).bind("scrollstart",function(){$("ul.ui-listview,ol.ui-listview").each(function(b,a){$(a).listview("isLazy")&&$(a).listview("isAtBottom")&&!$(a).listview("isLazyLoading")&&$(a).listview("lazyLoad")})});$(window).bind("scrollstop",function(){$("ul.ui-listview,ol.ui-listview").each(function(b,a){$(a).listview("isLazy")&&$(a).listview("isAtBottom")&&!$(a).listview("isLazyLoading")&&
$(a).listview("lazyLoad")})})});